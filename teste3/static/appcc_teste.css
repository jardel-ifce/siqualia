:root{
  --bg:#0b0d11; --card:#12161d; --muted:#9aa4b2; --fg:#e8eef6;
  --primary:#4ea8de; --ok:#22c55e; --warn:#facc15; --danger:#ef4444;
}
*{box-sizing:border-box}
body{margin:0;background:var(--bg);color:var(--fg);font:16px/1.4 system-ui}
.topbar{display:flex;justify-content:space-between;align-items:center;padding:12px 16px;background:#0f1319;border-bottom:1px solid #1f2631}
#statusBar{font-size:.9rem;color:var(--muted)}
main{max-width:980px;margin:0 auto;padding:16px}
.step{display:block;background:var(--card);border:1px solid #1f2631;border-radius:12px;padding:16px;margin:16px 0}
h1,h2{margin:0 0 8px}
.grid{display:grid;gap:12px}
.grid-2{grid-template-columns:repeat(2,minmax(0,1fr))}
label{display:flex;flex-direction:column;gap:6px}
input,select,textarea{background:#0f1319;color:var(--fg);border:1px solid #2a3342;border-radius:10px;padding:10px}
textarea{resize:vertical}
.nav{display:flex;gap:8px;justify-content:flex-end;margin-top:12px}
button{border:1px solid #2a3342;background:#10161f;color:var(--fg);padding:10px 14px;border-radius:12px;cursor:pointer}
button.primary{background:var(--primary);border-color:transparent;color:#00243a}
button.secondary{border-color:var(--primary);color:var(--primary)}
button.success{background:var(--ok);border-color:transparent;color:#05280f}
button.ghost{opacity:.85}
button:disabled{opacity:.45;cursor:not-allowed}
.muted{color:var(--muted)}
.pill{display:inline-block;padding:6px 10px;border:1px solid #2a3342;border-radius:999px;margin-left:8px}
.segGroup{display:flex;gap:16px}
.box{margin-top:8px}
.risk-badge{margin:10px 0;padding:10px;border-radius:10px;border:1px dashed #2a3342}
.risk-alto{background:#3a0b0b;border-color:#561414}
.risk-medio{background:#3a2a0b;border-color:#564114}
.risk-baixo{background:#22340b;border-color:#395614}
.risk-desp{background:#18311a;border-color:#2a4f2e}
.hidden{display:none}
.review{background:#0f1319;border:1px solid #2a3342;border-radius:10px;padding:10px;overflow:auto;max-height:420px}
.footer{max-width:980px;margin:0 auto 24px;display:flex;justify-content:flex-end}

/* ========== NOVO LAYOUT (suporta estrutura NOVA e ANTIGA) ========== */

/* Títulos de seção */
#formArea .section-title{font-weight:600;margin:16px 0 8px;color:var(--muted);letter-spacing:.3px}

/* Contêiner de seções (Top vs Outros) */
#formArea .form-sections{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:16px}

/* Grids internos das seções */
#formArea .fields{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:12px}
#formArea .fields{
  display:grid;
  grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
  gap:12px;
}
#formArea .form-sections{
  display:grid;
  grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
  gap:16px;
}
/* ===== Cartões de campo (MARCAÇÃO NOVA .field) ===== */
#formArea .field{
  background:#0f1319;border:1px solid #2a3342;border-radius:12px;padding:10px;
}
#formArea .field-header{display:flex;align-items:center;gap:8px;justify-content:space-between;margin-bottom:8px}
#formArea .field-title{font-weight:600}
#formArea .field-meta{font-family:ui-monospace,SFMono-Regular,Menlo,monospace;font-size:.75rem;color:var(--muted)}
#formArea .badge{display:inline-flex;align-items:center;gap:6px;border:1px solid #2a3342;border-radius:999px;padding:2px 8px;font-size:.75rem;color:var(--muted)}
#formArea .badge-top{background:rgba(78,168,222,.15);border-color:var(--primary);color:var(--primary);font-weight:600}
#formArea .help{color:var(--muted);font-size:.85rem;margin-top:6px}
#formArea .help {
  overflow-wrap: anywhere;     /* força quebra em nomes longos */
  word-break: break-word;
}
#formArea .unit{color:var(--muted);font-weight:500;margin-left:6px}
#formArea .inline{display:flex;align-items:center;gap:10px}
#formArea .field select,
#formArea .field input[type="number"],
#formArea .field input[type="range"]{width:100%}

/* ===== Compatibilidade com MARCAÇÃO ANTIGA (.form-grid .form-item) ===== */
#formArea .form-grid{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:12px}
#formArea .form-item{
  display:flex;flex-direction:column;gap:6px;
  background:#0f1319;border:1px solid #2a3342;border-radius:12px;padding:10px;
}
#formArea .form-item label{gap:6px;font-weight:600}
#formArea .form-item small{color:var(--muted)}
#formArea .form-item { min-width: 0; }

/* ===== Switch booleano ===== */
#formArea .switch{
  --h:22px; --w:44px;
  position:relative; width:var(--w); height:var(--h);
  background:#121a24; border:1px solid #2a3342; border-radius:999px; cursor:pointer;
}
#formArea .switch input{display:none}
#formArea .switch .thumb{
  position:absolute; top:2px; left:2px; height:18px; width:18px; border-radius:50%;
  background:#9aa4b2; transition:left .18s ease, background .18s ease;
}
#formArea .switch.checked{background:#0e2a39;border-color:#2b4d63}
#formArea .switch.checked .thumb{left:calc(var(--w) - 20px); background:#4ea8de}
#formArea .switch-label{font-size:.9rem}
#formArea .bool-row{display:flex; align-items:center; gap:10px; margin-top:6px}
#formArea .bool-hints{display:flex; gap:8px; font-size:.8rem; color:var(--muted); margin-top:4px}
#formArea .bool-hints span:first-child{opacity:.8}

/* Pequenos refinamentos */
#formArea select{appearance:none;background-image:linear-gradient(45deg,transparent 50%,var(--muted) 50%),linear-gradient(135deg,var(--muted) 50%,transparent 50%),linear-gradient(to right,#0000,#0000);
  background-position:calc(100% - 18px) calc(1em + 2px),calc(100% - 13px) calc(1em + 2px),calc(100% - 2.5em) .5em;
  background-size:5px 5px,5px 5px,1px 1.5em;background-repeat:no-repeat;
}

/* Responsivo */
@media (max-width: 900px){
  #formArea .form-sections{grid-template-columns:1fr}
  #formArea .fields{grid-template-columns:1fr}
  #formArea .form-grid{grid-template-columns:1fr}
}

/* ===== 1) Switch (quando o JS renderiza .switch) ===== */
#formArea .switch{
  --h:22px; --w:44px;
  position:relative; width:var(--w); height:var(--h);
  background:#121a24; border:1px solid #2a3342; border-radius:999px; cursor:pointer;
  display:inline-flex; align-items:center;
}
#formArea .switch input{display:none}
#formArea .switch .thumb{
  position:absolute; top:2px; left:2px; height:18px; width:18px; border-radius:50%;
  background:#9aa4b2; transition:left .18s ease, background .18s ease;
}
#formArea .switch.checked{background:#0e2a39;border-color:#2b4d63}
#formArea .switch.checked .thumb{left:calc(var(--w) - 20px); background:#4ea8de}
#formArea .bool-row{display:flex; align-items:center; gap:10px; margin-top:6px}
#formArea .bool-hints{display:flex; gap:8px; font-size:.8rem; color:var(--muted); margin-top:4px}
#formArea .switch-label{font-size:.9rem}

/* ===== 2) Fallback elegante para checkbox "puro" (marcação antiga) ===== */
#formArea .form-item label > input[type="checkbox"]{
  margin-right:10px;
  width:18px; height:18px;
  accent-color: var(--primary);      /* cor da caixinha */
}
#formArea .form-item label:has(> input[type="checkbox"]){
  flex-direction: row;                /* coloca label e checkbox na mesma linha */
  align-items: center;
  gap: 10px;
  font-weight: 600;
}

/* ===== 3) Cartão visual também para markup antigo ===== */
#formArea .form-item{
  background:#0f1319; border:1px solid #2a3342; border-radius:12px; padding:10px;
}

/* realce sutil para campos que NÃO são Top-N */
#formArea .field.is-other{
  background:#0e1218;
  border-color:#253040;
}
#formArea .field.is-other .field-title{ color:#c9d4df; opacity:.9 }


