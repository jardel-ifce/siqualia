<!DOCTYPE html>
<html lang="pt-BR">
<head>
	<meta charset="UTF-8">
	<title>Formulário I – Relatório de PCCs | SIQUALIA</title>
	<link href="css/base.css" rel="stylesheet">
	<link href="css/avaliacoes.css" rel="stylesheet">
	<style>
		.modal {
			display: none;
			position: fixed;
			top: 0;
			left: 0;
			width: 100%;
			height: 100%;
			background: rgba(0, 0, 0, 0.4);
			justify-content: center;
			align-items: flex-start;
			overflow-y: auto;
			padding-top: 3rem;
			z-index: 1000;
		}
		
		.modal-content {
			background: white;
			padding: 2rem;
			border-radius: 8px;
			max-width: 600px;
			width: 90%;
			margin: auto;
			box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
		}
		
		.modal-content h3 {
			margin-top: 0;
		}
		
		.modal-content .close {
			position: absolute;
			top: 10px;
			right: 20px;
			font-size: 1.5rem;
			cursor: pointer;
		}
		
		.modal-content .form-group,
		.modal-content fieldset {
			margin-bottom: 1.5rem;
		}
		
		.modal-content fieldset {
			padding: 1rem;
			border: 1px solid #ccc;
			border-radius: 6px;
			background-color: #f6f6f6;
		}
		
		.modal-content label {
			display: block;
			margin-top: 0.5rem;
			font-weight: bold;
		}
		
		.modal-content input {
			width: 100%;
			padding: 0.5rem;
			margin-top: 0.25rem;
			box-sizing: border-box;
		}
		
		.modal-content button {
			margin-top: 1rem;
			padding: 0.6rem 1.2rem;
			background: #004080;
			color: white;
			border: none;
			border-radius: 4px;
			cursor: pointer;
		}
		
		.modal-content button:hover {
			background: #003060;
		}
	</style>

</head>
<body>
<div id="menu"></div>

<div class="container">
	<h2>Formulário I – Relatório de Pontos Críticos de Controle (PCCs)</h2>
	
	<label for="produtoSelect">Selecione o Produto:</label>
	<select id="produtoSelect"></select>
	<button onclick="carregarEtapas()">Confirmar</button>
	
	<table id="tabelaResumo" style="display:none;">
		<thead>
		<tr>
			<th>Etapa</th>
			<th>Perigo</th>
			<th>Resultado</th>
			<th>Ações</th>
		</tr>
		</thead>
		<tbody id="corpoTabelaResumo"></tbody>
	</table>
</div>

<!-- Modal do Formulário I -->
<div class="modal" id="modalFormularioI">
	<div class="modal-content">
		<span class="close" onclick="fecharModal()">&times;</span>
		<h3>Formulário I – Preencher Dados do PCC</h3>
		
		<div class="form-group">
			<strong>Etapa:</strong> <span id="infoEtapa"></span><br>
			<strong>Perigo:</strong> <span id="infoPerigo"></span><br>
			<strong>Tipo:</strong> <span id="infoTipo"></span>
		</div>
		
		<form id="formularioIForm">
			<div class="form-group">
				<label>Limite Crítico:</label>
				<input name="limite_critico" type="text"/>
			</div>
			<fieldset>
				<legend>Monitoramento</legend>
				<label>O quê?</label><input name="monitoramento.oque" type="text"/>
				<label>Como?</label><input name="monitoramento.como" type="text"/>
				<label>Quando?</label><input name="monitoramento.quando" type="text"/>
				<label>Quem?</label><input name="monitoramento.quem" type="text"/>
			</fieldset>
			<div class="form-group">
				<label>Ação Corretiva:</label>
				<input name="acao_corretiva" type="text"/>
			</div>
			<div class="form-group">
				<label>Registro:</label>
				<input name="registro" type="text"/>
			</div>
			<div class="form-group">
				<label>Verificação:</label>
				<input name="verificacao" type="text"/>
			</div>
			<button onclick="salvarFormularioI()" type="button">Salvar Formulário I</button>
		</form>
	</div>
</div>

<script>
	fetch("/partials/menu.html")
			.then(res => res.text())
			.then(html => document.getElementById("menu").innerHTML = html);
</script>
<script src="js/avaliacoes.js"></script>
</body>
</html>
